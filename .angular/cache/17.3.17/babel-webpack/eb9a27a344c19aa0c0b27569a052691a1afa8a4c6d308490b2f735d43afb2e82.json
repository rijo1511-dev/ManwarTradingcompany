{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _c0 = [\"viewport\"];\nconst _c1 = [\"messageItem\"];\nfunction TestimonyMessageComponent_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 11, 1)(2, \"p\", 12);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 13);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 14);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const m_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", i_r3 === ctx_r3.activeIndex)(\"exiting\", i_r3 === ctx_r3.prevIndex);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(m_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r2.role);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(m_r2.text);\n  }\n}\nexport let TestimonyMessageComponent = /*#__PURE__*/(() => {\n  class TestimonyMessageComponent {\n    constructor(renderer) {\n      this.renderer = renderer;\n      this.messages = [{\n        name: 'Mohamed Ahmed H A Al Jaber',\n        role: 'Chairman, Manawer Trading & Contracting',\n        text: `Guided by the vision of Mohamed Ahmed H A Al Jaber, we are committed to contributing to Qatar’s continued growth as a regional economic power. Living in one of the world’s fastest-growing economies, we are proud to have actively participated in its development over the past four decades. Our success is built on consistent standards, strong local and international partnerships, and a selective recruitment process that ensures highly qualified staff deliver the best services.`\n      }, {\n        name: 'Joseph Mathew',\n        role: 'General Manager, Manawer Trading & Contracting',\n        text: `Manawer Trading & Contracting is a professional organization dedicated to serving our clients with honesty, integrity, and accountability. We are committed to transforming our organization into a world-class entity, ensuring sustained growth and long-term success. With a keen focus on engineering trends and modern infrastructure technologies, we leverage skills and innovation to achieve the goals of our valued clients.`\n      }];\n      this.activeIndex = 0;\n      this.intervalId = null;\n      this.intervalMs = 4000; // time between message changes\n      this.isPaused = false;\n      this.maxHeightPx = 0;\n      this.viewportWidthPx = 0;\n      this.resizeUnlisten = null;\n      this.prevIndex = null;\n      this.animationMs = 600;\n    }\n    ngAfterViewInit() {\n      // Measure message heights, choose the tallest so each message is fully visible\n      setTimeout(() => {\n        let max = 0;\n        this.messageItems.forEach(el => {\n          const h = el.nativeElement.offsetHeight;\n          if (h > max) max = h;\n        });\n        // default value in case measurement fails\n        if (max === 0) max = 220;\n        // ensure a minimum user-friendly height so content is not too small\n        if (max < 200) max = 220;\n        this.maxHeightPx = max;\n        this.renderer.setStyle(this.viewport.nativeElement, 'height', `${this.maxHeightPx}px`);\n        // ensure each message item has consistent height and vertical centering\n        this.messageItems.forEach(el => {\n          // set consistent height for each item so the viewport remains stable\n          this.renderer.setStyle(el.nativeElement, 'height', `${this.maxHeightPx}px`);\n          // set simple flex column inside each item for vertical centering\n          this.renderer.setStyle(el.nativeElement, 'display', 'flex');\n          this.renderer.setStyle(el.nativeElement, 'flexDirection', 'column');\n          this.renderer.setStyle(el.nativeElement, 'justifyContent', 'center');\n          // keep text left-aligned inside the testmony\n          this.renderer.setStyle(el.nativeElement, 'alignItems', 'flex-start');\n          // make sure each item fills the viewport width so only one shows at a time\n          this.renderer.setStyle(el.nativeElement, 'minWidth', '100%');\n        });\n        // measure viewport width and set item widths, then start the auto-scroll\n        this.viewportWidthPx = this.viewport.nativeElement.clientWidth || this.viewport.nativeElement.offsetWidth || this.viewport.nativeElement.getBoundingClientRect().width;\n        this.messageItems.forEach(el => {\n          this.renderer.setStyle(el.nativeElement, 'minWidth', `${this.viewportWidthPx}px`);\n          this.renderer.setStyle(el.nativeElement, 'width', `${this.viewportWidthPx}px`);\n        });\n        // update transform based on new measurement\n        this.start();\n        // add a window resize listener to recompute sizes\n        this.resizeUnlisten = this.renderer.listen('window', 'resize', () => {\n          // recalc width\n          const w = this.viewport.nativeElement.clientWidth || this.viewport.nativeElement.offsetWidth || this.viewport.nativeElement.getBoundingClientRect().width;\n          this.viewportWidthPx = w;\n          // set item widths\n          this.messageItems.forEach(el => {\n            this.renderer.setStyle(el.nativeElement, 'minWidth', `${this.viewportWidthPx}px`);\n            this.renderer.setStyle(el.nativeElement, 'width', `${this.viewportWidthPx}px`);\n          });\n        });\n      });\n    }\n    ngOnDestroy() {\n      this.clearTimer();\n      if (this.resizeUnlisten) {\n        this.resizeUnlisten();\n        this.resizeUnlisten = null;\n      }\n    }\n    start() {\n      this.clearTimer();\n      this.intervalId = setInterval(() => this.next(), this.intervalMs);\n      this.isPaused = false;\n    }\n    clearTimer() {\n      if (this.intervalId) {\n        clearInterval(this.intervalId);\n        this.intervalId = null;\n      }\n    }\n    pause() {\n      this.clearTimer();\n      this.isPaused = true;\n    }\n    resume() {\n      if (!this.isPaused) return;\n      this.start();\n    }\n    togglePause() {\n      if (this.isPaused) this.resume();else this.pause();\n    }\n    onKeyDown(event) {\n      // Only right arrow moves forward; left arrow is ignored because we enforce a single direction\n      const k = event.key;\n      if (k === 'ArrowRight') {\n        event.preventDefault();\n        this.next();\n        return;\n      }\n      // Space toggles pause/resume\n      if (k === ' ' || k === 'Spacebar' || event.code === 'Space') {\n        event.preventDefault();\n        this.togglePause();\n      }\n    }\n    // Keep prev() as no-op to avoid accidental calls — we enforce only forward motion\n    prev() {}\n    next() {\n      // record previous index so we can play a vanish animation\n      this.prevIndex = this.activeIndex;\n      this.activeIndex = (this.activeIndex + 1) % this.messages.length;\n      // clear prevIndex after animation completes\n      setTimeout(() => {\n        this.prevIndex = null;\n      }, this.animationMs);\n    }\n    // (removed duplicate handler) - previous duplicate onKeyDown function removed to avoid a compile error\n    getTransform() {\n      // use pixel translate to move the list horizontally, keep transform in px to avoid percent calculation issues\n      const px = this.activeIndex * this.viewportWidthPx;\n      return `translateX(-${px}px)`;\n    }\n    static {\n      this.ɵfac = function TestimonyMessageComponent_Factory(t) {\n        return new (t || TestimonyMessageComponent)(i0.ɵɵdirectiveInject(i0.Renderer2));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: TestimonyMessageComponent,\n        selectors: [[\"app-testimony-message\"]],\n        viewQuery: function TestimonyMessageComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n            i0.ɵɵviewQuery(_c1, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.viewport = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.messageItems = _t);\n          }\n        },\n        decls: 12,\n        vars: 3,\n        consts: [[\"viewport\", \"\"], [\"messageItem\", \"\"], [\"id\", \"testimonials\", 1, \"py-16\"], [1, \"max-w-6xl\", \"mx-auto\", \"px-4\"], [1, \"title\", \"mb-3\"], [1, \"text-2xl\", \"font-bold\", \"mb-6\", \"text-darkgreen-500\"], [\"tabindex\", \"0\", \"role\", \"list\", \"aria-live\", \"polite\", 1, \"testimony-viewport\", \"overflow-hidden\", \"w-full\", 3, \"mouseenter\", \"mouseleave\", \"keydown\"], [1, \"testimony-list\"], [\"class\", \"testimony-item p-4\", \"role\", \"listitem\", 3, \"active\", \"exiting\", 4, \"ngFor\", \"ngForOf\"], [1, \"controls\", \"mt-3\", \"flex\", \"items-center\", \"gap-2\", \"w-full\"], [1, \"px-3\", \"py-1\", \"bg-gray-100\", \"rounded\", 3, \"click\"], [\"role\", \"listitem\", 1, \"testimony-item\", \"p-4\"], [1, \"font-semibold\"], [1, \"text-sm\", \"text-gray-600\", \"mb-3\"], [1, \"text-sm\", \"leading-6\"]],\n        template: function TestimonyMessageComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"section\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"h2\", 5);\n            i0.ɵɵtext(4, \"Vision & Commitment from Leadership\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(5, \"div\", 6, 0);\n            i0.ɵɵlistener(\"mouseenter\", function TestimonyMessageComponent_Template_div_mouseenter_5_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.pause());\n            })(\"mouseleave\", function TestimonyMessageComponent_Template_div_mouseleave_5_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.resume());\n            })(\"keydown\", function TestimonyMessageComponent_Template_div_keydown_5_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onKeyDown($event));\n            });\n            i0.ɵɵelementStart(7, \"ul\", 7);\n            i0.ɵɵtemplate(8, TestimonyMessageComponent_li_8_Template, 8, 7, \"li\", 8);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"div\", 9)(10, \"button\", 10);\n            i0.ɵɵlistener(\"click\", function TestimonyMessageComponent_Template_button_click_10_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.next());\n            });\n            i0.ɵɵtext(11, \"Next \\u00BB\");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵstyleProp(\"transform\", ctx.getTransform());\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n          }\n        },\n        dependencies: [i1.NgForOf],\n        styles: [\".testimony-wrapper[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:.75rem .5rem;box-sizing:border-box}.testimony-viewport[_ngcontent-%COMP%]{overflow:hidden;position:relative;background:transparent;width:100%}.testimony-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;transition:transform .6s cubic-bezier(.22,.9,.12,1);will-change:transform}.testimony-item[_ngcontent-%COMP%]{box-sizing:border-box;min-width:100%;padding-left:.75rem;padding-right:.75rem;word-break:break-word}.testimony-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem}.testimony-item[_ngcontent-%COMP%]   .font-semibold[_ngcontent-%COMP%], .testimony-item[_ngcontent-%COMP%]   .text-gray-600[_ngcontent-%COMP%]{text-align:left}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;border:1px solid #e5e7eb;background:#f9fafb;padding:.35rem .6rem;border-radius:6px}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f3f4f6}@media (max-width: 640px){.testimony-wrapper[_ngcontent-%COMP%]{padding:.25rem}.testimony-item[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:.75rem}}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}.testimony-item[_ngcontent-%COMP%]{display:flex;align-items:center}.testimony-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6}.testimony-item[_ngcontent-%COMP%]{opacity:0;transform:translateY(0);transition:opacity .5s ease,transform .4s ease}.testimony-item.active[_ngcontent-%COMP%]{opacity:1}.testimony-item.exiting[_ngcontent-%COMP%]{opacity:0;transform:translateY(-6px);filter:blur(.5px)}.testimony-item[_ngcontent-%COMP%]   .font-semibold[_ngcontent-%COMP%]{font-size:1.05rem}.testimony-item[_ngcontent-%COMP%]   .text-sm[_ngcontent-%COMP%]{font-size:.95rem}\"]\n      });\n    }\n  }\n  return TestimonyMessageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}